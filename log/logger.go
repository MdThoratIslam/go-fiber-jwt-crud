package logger

import (
	"fmt"
	"io"
	"os"
	"time"

	"github.com/gofiber/fiber/v2/log"
)

// тЬЕ рж▓ржЧ ржлрж╛ржЗрж▓ ржПржмржВ ржХржирж╕рзЛрж▓рзЗ рж▓ржЧрж┐ржВ рж╕рзЗржЯржЖржк
func init() {
	// рж▓ржЧ ржлрж╛ржЗрж▓ рждрзИрж░рж┐ / ржУржкрзЗржи ржХрж░рж╛ (Append Mode)
	// %s ржжрж┐рзЯрзЗ рждрж╛рж░рж┐ржЦ ржлрж░ржорзНржпрж╛ржЯ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ (2006-01-02) ржПржмржВ ржлрж╛ржЗрж▓рзЗрж░ ржирж╛ржо рждрзИрж░рж┐ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ
	fileName := fmt.Sprintf("log/app/app_%s.log", time.Now().Format("02-01-2006"))
	logFile, err := os.OpenFile(fileName, os.O_CREATE|os.O_WRONLY|os.O_APPEND, 0666)
	/*
		ржПржЗ ржХрзЛржбржЯрж┐ Go ржкрзНрж░рзЛржЧрзНрж░рж╛ржорж┐ржВ ржнрж╛рж╖рж╛ржпрж╝ ржПржХржЯрж┐ ржлрж╛ржЗрж▓ ржЦрзБрж▓рждрзЗ ржмрж╛ рждрзИрж░рж┐ ржХрж░рждрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред ржирж┐ржЪрзЗ ржкрзНрж░рждрж┐ржЯрж┐ ржЕржВрж╢рзЗрж░ ржмрж░рзНржгржирж╛ ржжрзЗржУржпрж╝рж╛ рж╣рж▓рзЛ:
		    os.OpenFile(): ржПржЯрж┐ Go-ржПрж░ ржПржХржЯрж┐ ржмрж┐рж▓рзНржЯ-ржЗржи ржлрж╛ржВрж╢ржи, ржпрж╛ ржлрж╛ржЗрж▓ ржЦрзЛрж▓рж╛рж░ ржЬржирзНржп ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржпрж╝ред ржпржжрж┐ ржлрж╛ржЗрж▓ржЯрж┐ ржирж╛ ржерж╛ржХрзЗ, рждрж╛рж╣рж▓рзЗ ржПржЯрж┐ ржирждрзБржи ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░рзЗред
		    fileName: ржПржЯрж┐ ржлрж╛ржЗрж▓ржЯрж┐рж░ ржирж╛ржо ржирж┐рж░рзНржжрзЗрж╢ ржХрж░рзЗ, ржпрзЗржЯрж┐ ржЖржкржирж┐ ржЦрзБрж▓рждрзЗ ржмрж╛ рждрзИрж░рж┐ ржХрж░рждрзЗ ржЪрж╛ржиред
		    os.O_CREATE: ржПржЗ ржлрзНрж▓рзНржпрж╛ржЧржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ, ржпрж╛рждрзЗ ржпржжрж┐ ржлрж╛ржЗрж▓ржЯрж┐ ржЖржЧрзЗ ржерзЗржХрзЗ ржирж╛ ржерж╛ржХрзЗ, рждрж╛рж╣рж▓рзЗ ржПржЯрж┐ ржирждрзБржи ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░ржмрзЗред
		    os.O_WRONLY: ржПржЗ ржлрзНрж▓рзНржпрж╛ржЧржЯрж┐ рж╢рзБржзрзБржорж╛рждрзНрж░ рж▓рзЗржЦрж╛рж░ (write) ржЬржирзНржп ржлрж╛ржЗрж▓ ржЦрзБрж▓ржмрзЗред ржЕрж░рзНржерж╛рзО, ржЖржкржирж┐ ржлрж╛ржЗрж▓ ржерзЗржХрзЗ ржХрж┐ржЫрзБ ржкржбрж╝рждрзЗ ржкрж╛рж░ржмрзЗржи ржирж╛, рж╢рзБржзрзБржорж╛рждрзНрж░ рждрж╛рждрзЗ ржбрж╛ржЯрж╛ рж▓рж┐ржЦрждрзЗ ржкрж╛рж░ржмрзЗржиред
		    os.O_APPEND: ржПржЯрж┐ ржирж┐рж░рзНржжрзЗрж╢ ржХрж░рзЗ ржпрзЗ, ржирждрзБржи ржбрж╛ржЯрж╛ ржлрж╛ржЗрж▓рзЗрж░ рж╢рзЗрж╖рзЗ ржпрзЛржЧ рж╣ржмрзЗ (append рж╣ржмрзЗ)ред ржЕрж░рзНржерж╛рзО, ржкрзВрж░рзНржмржмрж░рзНрждрзА ржбрж╛ржЯрж╛ ржорзБржЫрзЗ ржпрж╛ржмрзЗ ржирж╛, ржмрж░ржВ рждрж╛рж░ ржкрж░рзЗ ржирждрзБржи ржбрж╛ржЯрж╛ ржпрзБржХрзНржд рж╣ржмрзЗред
		    0666: ржПржЯрж┐ ржлрж╛ржЗрж▓рзЗрж░ ржЕржирзБржорждрж┐ (permission) ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рзЗред ржПржЦрж╛ржирзЗ 0666 ржорж╛ржирзЗ рж╣рж▓рзЛ, ржлрж╛ржЗрж▓ржЯрж┐ ржкржбрж╝рж╛ (read) ржПржмржВ рж▓рзЗржЦрж╛ (write) ржжрзБржЯрзЛ ржХрж╛ржЬрзЗрж░ ржЬржирзНржпржЗ рж╕ржмрж╛рж░ ржХрж╛ржЫрзЗ ржЙржирзНржорзБржХрзНржд ржерж╛ржХржмрзЗред
		    logFile: ржнрзЗрж░рж┐ржпрж╝рзЗржмрж▓ржЯрж┐рждрзЗ os.OpenFile() ржлрж╛ржВрж╢ржирзЗрж░ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рж╛ ржлрж╛ржЗрж▓рзЗрж░ рж░рзЗржлрж╛рж░рзЗржирзНрж╕ рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рж╛ рж╣ржЪрзНржЫрзЗред ржПржЯрж┐ ржкрж░рзЗ рж▓рзЗржЦрж╛рж░ ржЬржирзНржп ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржмрзЗред
		    err: ржпржжрж┐ ржлрж╛ржЗрж▓ ржЦрзЛрж▓рж╛рж░ рж╕ржоржпрж╝ ржХрзЛржирзЛ рждрзНрж░рзБржЯрж┐ (error) ржШржЯрзЗ, рждржмрзЗ рждрж╛ err ржнрзЗрж░рж┐ржпрж╝рзЗржмрж▓рзЗ рж╕ржВрж░ржХрзНрж╖ржг рж╣ржмрзЗред ржкрзНрж░рзЛржЧрзНрж░рж╛ржорзЗ ржПржЗ рждрзНрж░рзБржЯрж┐ рж╣рзНржпрж╛ржирзНржбрзЗрж▓ ржХрж░рж╛ ржЙржЪрж┐рждред
	*/
	if err != nil {
		fmt.Println("тЭМ Could not open log file:", err)
	}
	/*
		ржЙржкрж░рзЗрж░ ржХрзЛржбржЯрж┐ Go ржкрзНрж░рзЛржЧрзНрж░рж╛ржорж┐ржВ ржнрж╛рж╖рж╛ржпрж╝ рж▓рзЗржЦрж╛ ржПржмржВ ржПржЯрж┐ рждрзНрж░рзБржЯрж┐ (error) ржпрж╛ржЪрж╛ржЗ ржХрж░рж╛рж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣ржЪрзНржЫрзЗред ржирж┐ржЪрзЗ ржкрзНрж░рждрж┐ржЯрж┐ ржЕржВрж╢рзЗрж░ ржмрзНржпрж╛ржЦрзНржпрж╛ ржжрзЗржУржпрж╝рж╛ рж╣рж▓рзЛ:
		1. if err != nil:
			ржПржЦрж╛ржирзЗ err ржПржХржЯрж┐ ржнрзЗрж░рж┐ржпрж╝рзЗржмрж▓, ржпрж╛ ржЖржЧрзЗрж░ рж▓рж╛ржЗржиржЧрзБрж▓рзЛрждрзЗ (ржпрзЗржоржи: os.OpenFile() ржлрж╛ржВрж╢ржи ржерзЗржХрзЗ) рждрзНрж░рзБржЯрж┐ ржзрж╛рж░ржг ржХрж░рзЗ ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗред
			err != nil ржорж╛ржирзЗ рж╣рж▓рзЛ, ржпржжрж┐ err-ржПрж░ ржорж╛ржи nil ржирж╛ рж╣ржпрж╝, ржЕрж░рзНржерж╛рзО рждрзНрж░рзБржЯрж┐ ржШржЯрзЗржЫрзЗ, рждрж╛рж╣рж▓рзЗ рж╢рж░рзНрждржЯрж┐ рж╕рждрзНржп рж╣ржмрзЗ ржПржмржВ ржкрж░ржмрж░рзНрждрзА ржмрзНрж▓ржХрзЗрж░ ржХрзЛржбржЯрж┐ ржЪрж╛рж▓рж╛ржирзЛ рж╣ржмрзЗред
		2. fmt.Println():
			fmt рж╣рж▓ Go-ржПрж░ ржПржХржЯрж┐ ржкрзНржпрж╛ржХрзЗржЬ, ржпрж╛ ржЗржиржкрзБржЯ ржПржмржВ ржЖржЙржЯржкрзБржЯрзЗрж░ (I/O) ржЬржирзНржп ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржпрж╝ред
			fmt.Println() ржлрж╛ржВрж╢ржиржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЯрж╛рж░рзНржорж┐ржирж╛рж▓рзЗ (console) ржмрж╛рж░рзНрждрж╛ ржкрзНрж░ржжрж░рзНрж╢ржи ржХрж░рж╛ рж╣ржпрж╝ред
			ржПржЯрж┐ Println рж╣ржУржпрж╝рж╛рж░ ржХрж╛рж░ржгрзЗ, ржмрж╛рж░рзНрждрж╛рж░ рж╢рзЗрж╖рзЗ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ ржирждрзБржи рж▓рж╛ржЗржи (newline) ржпрзЛржЧ рж╣ржпрж╝ред
		3. "тЭМ Could not open log file:":
			ржПржЯрж┐ ржПржХржЯрж┐ рж╕рзНржЯрзНрж░рж┐ржВ, ржпрж╛ рждрзНрж░рзБржЯрж┐рж░ ржмрж╛рж░рзНрждрж╛ рж╣рж┐рж╕рзЗржмрзЗ ржкрзНрж░ржжрж░рзНрж╢рж┐ржд рж╣ржмрзЗред
			ржПржЦрж╛ржирзЗ тЭМ ржЗржорзЛржЬрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ, ржпрж╛ рждрзНрж░рзБржЯрж┐рж░ рж╕ржВржХрзЗржд ржжрж┐рждрзЗ ржЪржорзОржХрж╛рж░ржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗред
			ржмрж╛рж░рзНрждрж╛ржЯрж┐ ржирж┐рж░рзНржжрзЗрж╢ ржХрж░ржЫрзЗ ржпрзЗ, рж▓ржЧ ржлрж╛ржЗрж▓ржЯрж┐ ржЦрзЛрж▓рж╛ рж╕ржорзНржнржм рж╣ржпрж╝ржирж┐ред
		4. , err:рж╕рзБржкрж╛рж░ржнрж╛ржЗржЬрж╛ржГ рзжрззрзнрззрзкрзжрзкрзлрззрзмрзи
			ржПржЦрж╛ржирзЗ , err ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ, ржпрж╛рж░ ржорж╛ржирзЗ рж╣рж▓рзЛ err ржнрзЗрж░рж┐ржпрж╝рзЗржмрж▓рзЗрж░ ржорж╛ржиржЯрж┐ржУ ржмрж╛рж░рзНрждрж╛рж░ ржкрж░рзЗ ржкрзНрж░ржжрж░рзНрж╢рж┐ржд рж╣ржмрзЗред
			ржПржЯрж┐ рждрзНрж░рзБржЯрж┐рж░ ржкрзНрж░ржХрзГржд ржХрж╛рж░ржгржЯрж┐ ржжрзЗржЦрж╛ржмрзЗ, ржпрзЗржоржи: "ржлрж╛ржЗрж▓ржЯрж┐ ржЦрзБржБржЬрзЗ ржкрж╛ржУржпрж╝рж╛ ржпрж╛ржпрж╝ржирж┐" ржмрж╛ "ржЕржирзБржорждрж┐рж░ рж╕ржорж╕рзНржпрж╛"ред
	*/

	// тЬЕ рж▓ржЧ ржлрж╛ржЗрж▓ ржПржмржВ ржХржирж╕рзЛрж▓рзЗ ржПржХрж╕рж╛ржерзЗ рж▓ржЧ ржкрзНрж░рж┐ржирзНржЯ ржХрж░рж╛
	multiWriter := io.MultiWriter(os.Stdout, logFile)
	log.SetOutput(multiWriter)

	// тЬЕ рж▓ржЧ рж▓рзЗржнрзЗрж▓ рж╕рзЗржЯ ржХрж░рж╛ (INFO ржПрж░ ржирж┐ржЪрзЗрж░ рж▓ржЧ ржЧрзБрж▓рзЛ ржкрзНрж░рж┐ржирзНржЯ рж╣ржмрзЗ ржирж╛)
	log.SetLevel(log.LevelInfo)

	// тЬЕ рж▓ржЧрж┐ржВ рж╢рзБрж░рзБ
	log.Info("ЁЯЪА Logger initialized successfully!")
}

// тЬЕ Custom Error log function
func Error(msg string, err error) {
	if err != nil {
		log.Errorf("%s: %s", msg, err.Error())
	} else {
		log.Error(msg)
	}
}

// тЬЕ Custom Success log function
func Success(msg string) {
	log.Info(msg)
}

// тЬЕ Custom Warning log function
func Warn(msg string) {
	log.Warn(msg)
}

// тЬЕ Custom Debug log function
func Debug(msg string) {
	log.Debug(msg)
}
